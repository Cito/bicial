<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Binaural CI Alignment â€” bicial</title>
    <meta
      name="description"
      content="Align the center frequencies of your cochlear implant with your other ear."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="main.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <h1 class="title">Binaural CI Alignment</h1>
        <p class="subtitle">
          Align the center frequencies of your cochlear implant with your other
          ear
        </p>
      </div>
    </header>

    <main class="site-main">
      <div class="container">
        <section class="card">
          <button
            id="btnHelp"
            class="icon-button"
            title="Help / Info"
            aria-label="Help / Info"
          >
            â„¹
          </button>
          <button
            id="btnHelpCloseIcon"
            class="icon-button hidden"
            title="Close help"
            aria-label="Close help"
          >
            â¨¯
          </button>
          <div id="appView">
            <!-- Top controls: CI side + electrode count in one row -->
            <div class="controls-row compact">
              <label class="control control-inline">
                <span class="label">CI side</span>
                <div class="segmented" role="radiogroup" aria-label="CI side">
                  <input type="radio" id="ciL" name="ciSide" value="L" />
                  <label for="ciL">L</label>
                  <input type="radio" id="ciR" name="ciSide" value="R" />
                  <label for="ciR">R</label>
                </div>
              </label>
              <label class="control control-inline">
                <span class="label">Electrodes</span>
                <div
                  class="segmented"
                  role="radiogroup"
                  aria-label="Number of electrodes"
                >
                  <input
                    type="radio"
                    id="e12"
                    name="electrodeCount"
                    value="12"
                  />
                  <label for="e12">12</label>
                  <input
                    type="radio"
                    id="e16"
                    name="electrodeCount"
                    value="16"
                  />
                  <label for="e16">16</label>
                  <input
                    type="radio"
                    id="e22"
                    name="electrodeCount"
                    value="22"
                  />
                  <label for="e22">22</label>
                </div>
              </label>
            </div>

            <!-- Dynamic table container -->
            <div id="fatContainer" class="table-container">
              <div class="placeholder">
                The electrode table will appear here.
              </div>
            </div>

            <!-- Below-table global controls: duration + reps -->
            <div class="controls-row compact">
              <label class="control control-inline">
                <span class="label">Beep duration (ms)</span>
                <input
                  id="beepDuration"
                  class="input input-narrow"
                  type="number"
                  min="10"
                  max="9999"
                  step="10"
                  value="500"
                  inputmode="numeric"
                />
              </label>
              <label class="control control-inline">
                <span class="label">Reps</span>
                <input
                  id="beepReps"
                  class="input input-narrow-3"
                  type="number"
                  min="1"
                  max="999"
                  step="1"
                  value="3"
                  inputmode="numeric"
                />
              </label>
            </div>

            <!-- Global volume sliders (L/ R) -->
            <div class="controls-row">
              <label class="control">
                <span class="label">Vol L</span>
                <input
                  id="volumeL"
                  class="range"
                  type="range"
                  min="0"
                  max="100"
                  step="1"
                  value="75"
                />
              </label>
              <label class="control">
                <span class="label">Vol R</span>
                <input
                  id="volumeR"
                  class="range"
                  type="range"
                  min="0"
                  max="100"
                  step="1"
                  value="75"
                />
              </label>
            </div>

            <!-- Export/Import/Copy/Paste/Reset -->
            <div class="actions">
              <div class="actions-group">
                <button
                  class="btn"
                  id="btnExport"
                  type="button"
                  aria-label="Safe settings"
                >
                  ğŸ“¤
                  <span>Safe settings</span>
                </button>
                <button
                  class="btn"
                  id="btnImport"
                  type="button"
                  aria-label="Load settings"
                >
                  ğŸ“¥
                  <span>Load settings</span>
                </button>
                <button
                  class="btn"
                  id="btnPasteFAT"
                  type="button"
                  aria-label="Paste CI-side frequencies"
                  title="Paste old FAT â€” paste CI-side frequencies (values separated by newline/space/semicolon)"
                >
                  ğŸ“„ <span>Paste FAT</span>
                </button>
                <button
                  class="btn"
                  id="btnCopyFAT"
                  type="button"
                  aria-label="Copy non-CI frequencies"
                  title="Copy new FAT â€” copy non-CI frequencies (one value per line)"
                >
                  ğŸ“‹ <span>Copy FAT</span>
                </button>
                <input
                  type="file"
                  id="importFile"
                  accept="application/json"
                  hidden
                />
              </div>
              <div class="actions-group">
                <button
                  class="btn"
                  id="btnResetAlign"
                  type="button"
                  aria-label="Reset alignments"
                >
                  ğŸ”„
                  <span>Reset alignments</span>
                </button>
                <button
                  class="btn"
                  id="btnResetAll"
                  type="button"
                  aria-label="Reset everything"
                >
                  ğŸ”
                  <span>Reset all</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Help view (hidden by default) -->
          <div id="helpView" class="help hidden" aria-hidden="true">
            <div id="helpContent" class="help-content">
              <!-- README will be loaded here -->
            </div>
          </div>
          <!-- Visualization view (hidden by default) -->
          <div id="vizView" class="help hidden" aria-hidden="true">
            <div id="vizContent" class="help-content">
              <!-- Visualization will be rendered here -->
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <b>bicial</b> is a
        <a href="https://github.com/cito/bicial">GitHub project</a> &copy; 2025
        by <a href="https://github.com/cito">Christoph Zwerschke</a> &mdash; see
        <a href="#" id="lnkInstructions">info &amp; terms</a>
      </div>
    </footer>

    <script src="cochlea.js"></script>
    <script src="main.js"></script>
  </body>
</html>
